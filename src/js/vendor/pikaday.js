/*
 Pikaday

 Copyright © 2014 David Bushell | BSD & MIT license | https://github.com/dbushell/Pikaday
*/
(function(n,p){var w;if("object"===typeof exports){try{w=require("moment")}catch(f){}module.exports=p(w)}else"function"===typeof define&&define.amd?define(function(f){try{w=f("moment")}catch(A){}return p(w)}):n.Pikaday=p(n.moment)})(this,function(n){var p="function"===typeof n,w=!!window.addEventListener,f=window.document,A=window.setTimeout,q=function(a,b,d,c){w?a.addEventListener(b,d,!!c):a.attachEvent("on"+b,d)},r=function(a,b,d,c){w?a.removeEventListener(b,d,!!c):a.detachEvent("on"+b,d)},B=function(a,
b,d){var c;f.createEvent?(c=f.createEvent("HTMLEvents"),c.initEvent(b,!0,!1),c=x(c,d),a.dispatchEvent(c)):f.createEventObject&&(c=f.createEventObject(),c=x(c,d),a.fireEvent("on"+b,c))},h=function(a,b){return-1!==(" "+a.className+" ").indexOf(" "+b+" ")},C=function(a){return/Array/.test(Object.prototype.toString.call(a))},g=function(a){return/Date/.test(Object.prototype.toString.call(a))&&!isNaN(a.getTime())},L=function(a,b){return[31,0===a%4&&0!==a%100||0===a%400?29:28,31,30,31,30,31,31,30,31,30,
31][b]},D=function(a){g(a)&&a.setHours(0,0,0,0)},E=function(a,b){return a.getTime()===b.getTime()},x=function(a,b,d){var c,l;for(c in b)if((l=void 0!==a[c])&&"object"===typeof b[c]&&null!==b[c]&&void 0===b[c].nodeName)g(b[c])?d&&(a[c]=new Date(b[c].getTime())):C(b[c])?d&&(a[c]=b[c].slice(0)):a[c]=x({},b[c],d);else if(d||!l)a[c]=b[c];return a},F=function(a){0>a.month&&(a.year-=Math.ceil(Math.abs(a.month)/12),a.month+=12);11<a.month&&(a.year+=Math.floor(Math.abs(a.month)/12),a.month-=12);return a},
t={field:null,bound:void 0,position:"bottom left",reposition:!0,format:"YYYY-MM-DD",defaultDate:null,setDefaultDate:!1,firstDay:0,formatStrict:!1,minDate:null,maxDate:null,yearRange:10,showWeekNumber:!1,minYear:0,maxYear:9999,minMonth:void 0,maxMonth:void 0,startRange:null,endRange:null,isRTL:!1,yearSuffix:"",showMonthAfterYear:!1,showDaysInNextAndPreviousMonths:!1,numberOfMonths:1,mainCalendar:"left",container:void 0,i18n:{previousMonth:"Previous Month",nextMonth:"Next Month",months:"January February March April May June July August September October November December".split(" "),
weekdays:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),weekdaysShort:"Sun Mon Tue Wed Thu Fri Sat".split(" ")},theme:null,onSelect:null,onOpen:null,onClose:null,onDraw:null},M=function(a,b,d){for(b+=a.firstDay;7<=b;)b-=7;return d?a.i18n.weekdaysShort[b]:a.i18n.weekdays[b]},N=function(a){var b=[],d="false";if(a.isEmpty)if(a.showDaysInNextAndPreviousMonths)b.push("is-outside-current-month");else return'<td class="is-empty"></td>';a.isDisabled&&b.push("is-disabled");a.isToday&&
b.push("is-today");a.isSelected&&(b.push("is-selected"),d="true");a.isInRange&&b.push("is-inrange");a.isStartRange&&b.push("is-startrange");a.isEndRange&&b.push("is-endrange");return'<td data-day="'+a.day+'" class="'+b.join(" ")+'" aria-selected="'+d+'"><button class="pika-button pika-day" type="button" data-pika-year="'+a.year+'" data-pika-month="'+a.month+'" data-pika-day="'+a.day+'">'+a.day+"</button></td>"},O=function(a,b,d){var c=new Date(d,0,1);return'<td class="pika-week">'+Math.ceil(((new Date(d,
b,a)-c)/864E5+c.getDay()+1)/7)+"</td>"},P=function(a,b){return"<tr>"+(b?a.reverse():a).join("")+"</tr>"},I=function(a,b,d,c,l,y){var e,f,m,k=a._o,h=d===k.minYear,g=d===k.maxYear;y='<div id="'+y+'" class="pika-title" role="heading" aria-live="assertive">';var n=!0,p=!0;m=[];for(e=0;12>e;e++)m.push('<option value="'+(d===l?e-b:12+e-b)+'"'+(e===c?' selected="selected"':"")+(h&&e<k.minMonth||g&&e>k.maxMonth?'disabled="disabled"':"")+">"+k.i18n.months[e]+"</option>");l='<div class="pika-label">'+k.i18n.months[c]+
'<select class="pika-select pika-select-month" tabindex="-1">'+m.join("")+"</select></div>";C(k.yearRange)?(e=k.yearRange[0],f=k.yearRange[1]+1):(e=d-k.yearRange,f=1+d+k.yearRange);for(m=[];e<f&&e<=k.maxYear;e++)e>=k.minYear&&m.push('<option value="'+e+'"'+(e===d?' selected="selected"':"")+">"+e+"</option>");d='<div class="pika-label">'+d+k.yearSuffix+'<select class="pika-select pika-select-year" tabindex="-1">'+m.join("")+"</select></div>";y=k.showMonthAfterYear?y+(d+l):y+(l+d);h&&(0===c||k.minMonth>=
c)&&(n=!1);g&&(11===c||k.maxMonth<=c)&&(p=!1);0===b&&(y+='<button class="pika-prev'+(n?"":" is-disabled")+'" type="button">'+k.i18n.previousMonth+"</button>");b===a._o.numberOfMonths-1&&(y+='<button class="pika-next'+(p?"":" is-disabled")+'" type="button">'+k.i18n.nextMonth+"</button>");return y+"</div>"},G=function(a){var b=this,d=b.config(a);b._onMouseDown=function(a){if(b._v){a=a||window.event;var c=a.target||a.srcElement;if(c)if(h(c,"is-disabled")||(!h(c,"pika-button")||h(c,"is-empty")||h(c.parentNode,
"is-disabled")?h(c,"pika-prev")?b.prevMonth():h(c,"pika-next")&&b.nextMonth():(b.setDate(new Date(c.getAttribute("data-pika-year"),c.getAttribute("data-pika-month"),c.getAttribute("data-pika-day"))),d.bound&&A(function(){b.hide();d.field&&d.field.blur()},100))),h(c,"pika-select"))b._c=!0;else if(a.preventDefault)a.preventDefault();else return a.returnValue=!1}};b._onChange=function(a){a=a||window.event;(a=a.target||a.srcElement)&&(h(a,"pika-select-month")?b.gotoMonth(a.value):h(a,"pika-select-year")&&
b.gotoYear(a.value))};b._onKeyChange=function(a){a=a||window.event;if(b.isVisible())switch(a.keyCode){case 13:case 27:d.field.blur();break;case 37:a.preventDefault();b.adjustDate("subtract",1);break;case 38:b.adjustDate("subtract",7);break;case 39:b.adjustDate("add",1);break;case 40:b.adjustDate("add",7)}};b._onInputChange=function(a){a.firedBy!==b&&(a=p?(a=n(d.field.value,d.format,d.formatStrict))&&a.isValid()?a.toDate():null:new Date(Date.parse(d.field.value)),g(a)&&b.setDate(a),b._v||b.show())};
b._onInputFocus=function(){b.show()};b._onInputClick=function(){b.show()};b._onInputBlur=function(){var a=f.activeElement;do if(h(a,"pika-single"))return;while(a=a.parentNode);b._c||(b._b=A(function(){b.hide()},50));b._c=!1};b._onClick=function(a){a=a||window.event;var c=a=a.target||a.srcElement;if(a){w||!h(a,"pika-select")||a.onchange||(a.setAttribute("onchange","return;"),q(a,"change",b._onChange));do if(h(c,"pika-single")||c===d.trigger)return;while(c=c.parentNode);b._v&&a!==d.trigger&&c!==d.trigger&&
b.hide()}};b.el=f.createElement("div");b.el.className="pika-single"+(d.isRTL?" is-rtl":"")+(d.theme?" "+d.theme:"");q(b.el,"mousedown",b._onMouseDown,!0);q(b.el,"touchend",b._onMouseDown,!0);q(b.el,"change",b._onChange);q(f,"keydown",b._onKeyChange);d.field&&(d.container?d.container.appendChild(b.el):d.bound?f.body.appendChild(b.el):d.field.parentNode.insertBefore(b.el,d.field.nextSibling),q(d.field,"change",b._onInputChange),d.defaultDate||(d.defaultDate=p&&d.field.value?n(d.field.value,d.format).toDate():
new Date(Date.parse(d.field.value)),d.setDefaultDate=!0));a=d.defaultDate;g(a)?d.setDefaultDate?b.setDate(a,!0):b.gotoDate(a):b.gotoDate(new Date);d.bound?(this.hide(),b.el.className+=" is-bound",q(d.trigger,"click",b._onInputClick),q(d.trigger,"focus",b._onInputFocus),q(d.trigger,"blur",b._onInputBlur)):this.show()};G.prototype={config:function(a){this._o||(this._o=x({},t,!0));a=x(this._o,a,!0);a.isRTL=!!a.isRTL;a.field=a.field&&a.field.nodeName?a.field:null;a.theme="string"===typeof a.theme&&a.theme?
a.theme:null;a.bound=!!(void 0!==a.bound?a.field&&a.bound:a.field);a.trigger=a.trigger&&a.trigger.nodeName?a.trigger:a.field;a.disableWeekends=!!a.disableWeekends;a.disableDayFn="function"===typeof a.disableDayFn?a.disableDayFn:null;var b=parseInt(a.numberOfMonths,10)||1;a.numberOfMonths=4<b?4:b;g(a.minDate)||(a.minDate=!1);g(a.maxDate)||(a.maxDate=!1);a.minDate&&a.maxDate&&a.maxDate<a.minDate&&(a.maxDate=a.minDate=!1);a.minDate&&this.setMinDate(a.minDate);a.maxDate&&this.setMaxDate(a.maxDate);C(a.yearRange)?
(b=(new Date).getFullYear()-10,a.yearRange[0]=parseInt(a.yearRange[0],10)||b,a.yearRange[1]=parseInt(a.yearRange[1],10)||b):(a.yearRange=Math.abs(parseInt(a.yearRange,10))||t.yearRange,100<a.yearRange&&(a.yearRange=100));return a},toString:function(a){return g(this._d)?p?n(this._d).format(a||this._o.format):this._d.toDateString():""},getMoment:function(){return p?n(this._d):null},setMoment:function(a,b){p&&n.isMoment(a)&&this.setDate(a.toDate(),b)},getDate:function(){return g(this._d)?new Date(this._d.getTime()):
new Date},setDate:function(a,b){if(!a)return this._d=null,this._o.field&&(this._o.field.value="",B(this._o.field,"change",{firedBy:this})),this.draw();"string"===typeof a&&(a=new Date(Date.parse(a)));if(g(a)){var d=this._o.minDate,c=this._o.maxDate;g(d)&&a<d?a=d:g(c)&&a>c&&(a=c);this._d=new Date(a.getTime());D(this._d);this.gotoDate(this._d);this._o.field&&(this._o.field.value=this.toString(),B(this._o.field,"change",{firedBy:this}));b||"function"!==typeof this._o.onSelect||this._o.onSelect.call(this,
this.getDate())}},gotoDate:function(a){var b=!0;if(g(a)){if(this.calendars){var b=new Date(this.calendars[0].year,this.calendars[0].month,1),d=new Date(this.calendars[this.calendars.length-1].year,this.calendars[this.calendars.length-1].month,1),c=a.getTime();d.setMonth(d.getMonth()+1);d.setDate(d.getDate()-1);b=c<b.getTime()||d.getTime()<c}b&&(this.calendars=[{month:a.getMonth(),year:a.getFullYear()}],"right"===this._o.mainCalendar&&(this.calendars[0].month+=1-this._o.numberOfMonths));this.adjustCalendars()}},
adjustDate:function(a,b){var d=this.getDate(),c=864E5*parseInt(b),l;"add"===a?l=new Date(d.valueOf()+c):"subtract"===a&&(l=new Date(d.valueOf()-c));p&&("add"===a?l=n(d).add(b,"days").toDate():"subtract"===a&&(l=n(d).subtract(b,"days").toDate()));this.setDate(l)},adjustCalendars:function(){this.calendars[0]=F(this.calendars[0]);for(var a=1;a<this._o.numberOfMonths;a++)this.calendars[a]=F({month:this.calendars[0].month+a,year:this.calendars[0].year});this.draw()},gotoToday:function(){this.gotoDate(new Date)},
gotoMonth:function(a){isNaN(a)||(this.calendars[0].month=parseInt(a,10),this.adjustCalendars())},nextMonth:function(){this.calendars[0].month++;this.adjustCalendars()},prevMonth:function(){this.calendars[0].month--;this.adjustCalendars()},gotoYear:function(a){isNaN(a)||(this.calendars[0].year=parseInt(a,10),this.adjustCalendars())},setMinDate:function(a){a instanceof Date?(D(a),this._o.minDate=a,this._o.minYear=a.getFullYear(),this._o.minMonth=a.getMonth()):(this._o.minDate=t.minDate,this._o.minYear=
t.minYear,this._o.minMonth=t.minMonth,this._o.startRange=t.startRange);this.draw()},setMaxDate:function(a){a instanceof Date?(D(a),this._o.maxDate=a,this._o.maxYear=a.getFullYear(),this._o.maxMonth=a.getMonth()):(this._o.maxDate=t.maxDate,this._o.maxYear=t.maxYear,this._o.maxMonth=t.maxMonth,this._o.endRange=t.endRange);this.draw()},setStartRange:function(a){this._o.startRange=a},setEndRange:function(a){this._o.endRange=a},draw:function(a){if(this._v||a){var b=this._o,d=b.minYear,c=b.maxYear,l=b.minMonth,
f=b.maxMonth;a="";this._y<=d&&(this._y=d,!isNaN(l)&&this._m<l&&(this._m=l));this._y>=c&&(this._y=c,!isNaN(f)&&this._m>f&&(this._m=f));d="pika-title-"+Math.random().toString(36).replace(/[^a-z]+/g,"").substr(0,2);for(c=0;c<b.numberOfMonths;c++)a+='<div class="pika-lendar">'+I(this,c,this.calendars[c].year,this.calendars[c].month,this.calendars[0].year,d)+this.render(this.calendars[c].year,this.calendars[c].month,d)+"</div>";this.el.innerHTML=a;b.bound&&"hidden"!==b.field.type&&A(function(){b.trigger.focus()},
1);if("function"===typeof this._o.onDraw)this._o.onDraw(this);b.bound&&b.field.setAttribute("aria-label","Use the arrow keys to pick a date")}},adjustPosition:function(){var a,b,d,c,l,h,e,g,m;if(!this._o.container){this.el.style.position="absolute";b=a=this._o.trigger;d=this.el.offsetWidth;c=this.el.offsetHeight;l=window.innerWidth||f.documentElement.clientWidth;h=window.innerHeight||f.documentElement.clientHeight;e=window.pageYOffset||f.body.scrollTop||f.documentElement.scrollTop;if("function"===
typeof a.getBoundingClientRect)b=a.getBoundingClientRect(),g=b.left+window.pageXOffset,m=b.bottom+window.pageYOffset;else for(g=b.offsetLeft,m=b.offsetTop+b.offsetHeight;b=b.offsetParent;)g+=b.offsetLeft,m+=b.offsetTop;if(this._o.reposition&&g+d>l||-1<this._o.position.indexOf("right")&&0<g-d+a.offsetWidth)g=g-d+a.offsetWidth;if(this._o.reposition&&m+c>h+e||-1<this._o.position.indexOf("top")&&0<m-c-a.offsetHeight)m=m-c-a.offsetHeight;this.el.style.left=g+"px";this.el.style.top=m+"px"}},render:function(a,
b,d){var c=this._o,f=new Date,h=L(a,b),e=(new Date(a,b,1)).getDay(),n=[],m=[];D(f);0<c.firstDay&&(e-=c.firstDay,0>e&&(e+=7));for(var k=0===b?11:b-1,p=11===b?0:b+1,q=0===b?a-1:a,t=11===b?a+1:a,w=L(q,k),r=h+e,u=r;7<u;)u-=7;for(var r=r+(7-u),x=u=0;u<r;u++){var v=new Date(a,b,1+(u-e)),A=g(this._d)?E(v,this._d):!1,C=E(v,f),B=u<e||u>=h+e,H=1+(u-e),J=b,K=a,F=c.startRange&&E(c.startRange,v),G=c.endRange&&E(c.endRange,v),I=c.startRange&&c.endRange&&c.startRange<v&&v<c.endRange,z;!(z=c.minDate&&v<c.minDate||
c.maxDate&&v>c.maxDate)&&(z=c.disableWeekends)&&(z=v.getDay(),z=0===z||6===z);v=z||c.disableDayFn&&c.disableDayFn(v);B&&(u<e?(H=w+H,J=k,K=q):(H-=h,J=p,K=t));m.push(N({day:H,month:J,year:K,isSelected:A,isToday:C,isDisabled:v,isEmpty:B,isStartRange:F,isEndRange:G,isInRange:I,showDaysInNextAndPreviousMonths:c.showDaysInNextAndPreviousMonths}));7===++x&&(c.showWeekNumber&&m.unshift(O(u-e,b,a)),n.push(P(m,c.isRTL)),m=[],x=0)}b=[];c.showWeekNumber&&b.push("<th></th>");for(a=0;7>a;a++)b.push('<th scope="col"><abbr title="'+
M(c,a)+'">'+M(c,a,!0)+"</abbr></th>");c="<thead><tr>"+(c.isRTL?b.reverse():b).join("")+"</tr></thead>";return'<table cellpadding="0" cellspacing="0" class="pika-table" role="grid" aria-labelledby="'+d+'">'+c+("<tbody>"+n.join("")+"</tbody>")+"</table>"},isVisible:function(){return this._v},show:function(){if(!this.isVisible()){var a=this.el,b;b=(" "+a.className+" ").replace(" is-hidden "," ");b=b.trim?b.trim():b.replace(/^\s+|\s+$/g,"");a.className=b;this._v=!0;this.draw();this._o.bound&&(q(f,"click",
this._onClick),this.adjustPosition());"function"===typeof this._o.onOpen&&this._o.onOpen.call(this)}},hide:function(){var a=this._v;if(!1!==a){this._o.bound&&r(f,"click",this._onClick);this.el.style.position="static";this.el.style.left="auto";this.el.style.top="auto";var b=this.el;h(b,"is-hidden")||(b.className=""===b.className?"is-hidden":b.className+" is-hidden");this._v=!1;void 0!==a&&"function"===typeof this._o.onClose&&this._o.onClose.call(this)}},destroy:function(){this.hide();r(this.el,"mousedown",
this._onMouseDown,!0);r(this.el,"touchend",this._onMouseDown,!0);r(this.el,"change",this._onChange);this._o.field&&(r(this._o.field,"change",this._onInputChange),this._o.bound&&(r(this._o.trigger,"click",this._onInputClick),r(this._o.trigger,"focus",this._onInputFocus),r(this._o.trigger,"blur",this._onInputBlur)));this.el.parentNode&&this.el.parentNode.removeChild(this.el)}};return G});